# GUIつきSSR

GUI上でSSRを操作できる。

## 使い方

GUIつきのプログラムを走らせるには`src/gui.py`を実行してください。

```shell
pipenv run python src/gui.py
```

CLIバージョンも存在していて実行するには`src/cui.py`を実行してください。

```shell
pipenv run python src/cui.py
```

## 実装について

GUIを作るにあったって従来の`script`ディレクトにあるプログラムでは困難な点が多かったので、これまでのプログラムを参考に別プロセスで測定処理を実行する様に変更している。そのため、これまでのコードと別に`src`ディレクトリにコードが置いてあり、`script`ディレクトリのコードには依存していない。

`src`ディレクトリは`measure`、`instrument`、`cli`、`gui`ディレクトリに分けられている。

- `measure` ユーザーマクロを実行し実際に測定を行うプログラム
- `instrument` ユーザーマクロ用の装置と通信するためのプログラム
- `cli` 設定ファイルを読み込んで測定を行い、グラフを表示するプログラム
- `gui` `cli`と同じだがGUI上で操作できる

## これまでとの違い

- 測定プログラムはcliやguiとは別プロセスで実行されます
  - GPLを回避してUIの処理が測定をブロックしないようにするため
- 定義ファイルを設定ファイルという呼び方に変えました
- 全体のログや一時ファイルは`.ssr`フォルダ内に作成されます
- テストは`test`ディレクトリに移動しました

### ユーザーマクロ

- 測定用の関数のインポート先が`measure.measurement`や`measure.basedata`に変更された
- コマンド機能が無くなり`on_command`関数は無視されます

### 設定ファイル

- 行の先頭と末尾、イコールの前後のスペースが無視されるようになりました
